<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>在线点餐</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script type="text/javascript" src="js/jquery.js" ></script>
	</head>
	<body>
		<div>
			<style>
				.sectionCheckedRoom{
					margin-top: 3px;
				}
				.sectionCheckedRoom>ul>li>span{
					position: absolute;
					right: 12px;
					color: #8A8989;
					line-height: 41px;
					color: #337AB7;
					display: none;
				}
				.sectionCheckedRoom>ul>li.active>span{
					display: block;
				}
				.sectionCheckedRoom>ul>li:active{
					background-color: #CCCCCC;
				}
				
			</style>
			<header class="header">
				<h4>选择房间</h4>
				<a class="toBack"><span class="glyphicon glyphicon-chevron-left"></span></a>
			</header>
			<section class="sectionCheckedRoom">
				<label class="titleLabel">请选择房间:</label>
				<ul class="list">
				</ul>
			</section>
			<script>
				$.init=function(){
					function parseRoomData(no){
						var html="";
						$($.roomsData).find("DocumentElement>RoomInfoDetail").each(function(){
							var areaId=$(this).children("Room_AreaID").text();
							var state=$(this).children("Room_Isvalid").text();
							if(areaId==no&&state=="3"){
								var room={};
								room.id=$(this).children("Room_Id").text();
								room.name=$(this).children("Room_Name").text();
								room.ip=$(this).children("Room_Ip:eq(0)").text();
								html+=returnStringForSectionCheckedRoomUlLi(room);
							}
						});
						return html;
					}
					function returnStringForSectionCheckedRoomUlLi(obj){
						return "<li no=\""+obj.id+"\" val=\""+obj.name+"\" ip=\""+obj.ip+"\">"+obj.name+"<span class=\"glyphicon glyphicon-ok\"></span></li>";
					}
					$(".sectionCheckedRoom>ul").html(parseRoomData($.dataConfirmCheckedAreaId));
					if(!!$.dataConfirmCheckedRoomId){
						$(".sectionCheckedRoom>ul>li[no='"+$.dataConfirmCheckedRoomId+"']").addClass("active");
					}
					$.tap(".sectionCheckedRoom>ul>li",function(){
						$(this).parent().children("li.active").removeClass("active");
						$(this).addClass("active");
						$.dataConfirmCheckedRoomId=$(this).attr("no");
						$.dataConfirmCheckedRoomName=$(this).attr("val");
						$.dataConfirmCheckedRoomIP=$(this).attr("ip");
						window.setTimeout(function(){
							$.toBack();
						},300);
					});
				}
			</script>
		</div>
		
	</body>
</html>
