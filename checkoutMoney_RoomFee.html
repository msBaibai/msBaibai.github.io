<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>在线点餐</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script type="text/javascript" src="js/jquery.js" ></script>
	</head>
	<body>
		<div>
			<style>
				.sectionCheckoutMoney_RoomFee{
					margin-top: 3px;
					height: calc(100% - 47px);
				    overflow-y: auto;
				}
				.sectionCheckoutMoney_RoomFee>div{
					width: 100%;
					height: 100%;
					position: relative;
					//overflow-y: hidden;
				}
				
				.sectionCheckoutMoney_RoomFee>div>ul>li>b{
					position: absolute;
				    right: 12px;
				    color: #868686;
				}
			</style>
			<script id="checkoutMoneyRoomFeeTemplate" type="text/template">
				<label class="titleLabel">序号{[no]}</label>
				<ul class="list">
					<li>房间号<b>{[roomId]}</b></li>
					<li>开始时间<b>{[startTime]}</b></li>
					<li>结束时间<b>{[endTime]}</b></li>
					<li>时长<b>{[time]}</b></li>
					<li>单价<b>{[unitPrice]}</b></li>
					<li>小计<b>{[price]}</b></li>
					<li>折扣<b>{[realDiscount]}</b></li>
					<li>应收<b>{[priceAfterDiscount]}</b></li>
					<li>状态<b>{[state]}</b></li>
				</ul>
			</script>
			<header class="header">
				<h4>房费</h4>
				<a class="toBack"><span class="glyphicon glyphicon-chevron-left"></span></a>
			</header>
			<section class="sectionCheckoutMoney_RoomFee">
				<div>
					
				</div>
			</section>
			<script>
			
				$.init=function(){
					function sendGetCheckoutMoney_RoomFee(parseDataFn){
						$.ajax({
							type:"get",
							url:"xml/RoomBindingFee.xml",
							data:"method=get&url="+encodeURIComponent("RoomBindingFee/"+$.dataConfirmCheckedRoomId),
//							url:"http://10.0.3.72:8887/HttpCalculatorService/HttpCalculatorService/RoomBindingFee/"+$.dataConfirmCheckedRoomId,
							dataType:"text",
							success:function(str){
								parseDataFn(str);
							},
							error:function(){
								$.alt("操作失败!");
							}
						});
					}
					sendGetCheckoutMoney_RoomFee(function(str){
						var template=document.getElementById("checkoutMoneyRoomFeeTemplate").innerHTML;
						var html="";
						$(str).find("DocumentElement>RoomBindingFee").each(function(){
							var temp=$.listSetVal(template,"roomId",$(this).children("RoomSerivalNo").text());
							temp=$.listSetVal(temp,"startTime",$(this).children("StartDateTime").text().replace(/T/g," ").substring(0,$(this).children("StartDateTime").text().indexOf("+")));
							temp=$.listSetVal(temp,"endTime",$(this).children("EndDateTime").text().replace(/T/g," ").substring(0,$(this).children("StartDateTime").text().indexOf("+")));
							temp=$.listSetVal(temp,"time",$(this).children("Time").text()+"分钟");
							temp=$.listSetVal(temp,"unitPrice","&yen;"+$(this).children("UnitPrice").text());
							temp=$.listSetVal(temp,"price","&yen;"+$(this).children("price").text());
							temp=$.listSetVal(temp,"realDiscount",$(this).children("RealDiscount").text()+"%");
							temp=$.listSetVal(temp,"priceAfterDiscount","&yen;"+$(this).children("PriceAfterDiscount").text());
							temp=$.listSetVal(temp,"state",$(this).children("state").text());
							temp=$.listSetVal(temp,"no",$(this).children("ID").text());
							html+=temp;
						});
						$(".sectionCheckoutMoney_RoomFee>div").html(html);
					});
				}
			</script>
		</div>
		
	</body>
</html>
