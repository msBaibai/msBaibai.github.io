(function(a){function g(b,f){a.ajax({type:"get",url:b+"?_="+(new Date).getTime(),dataType:"html",timeout:5E3,success:function(d){var c=document.createElement("div");c.style.display="none";c.innerHTML=u(d);d=a(c).html();b&&-1==b.indexOf("http://")&&a.getHTML(b,function(c){c&&null!=c&&"null"!=c||a.addHTML(b,d)});f&&f(d)},error:function(d){a(".loading").css("display","none");window.location.hash=q;a.createConfirmBox({title:"\u7f51\u7edc\u4e2d\u65ad",content:"\u7f51\u7edc\u5df2\u65ad\u5f00,\u662f\u5426\u91cd\u8fde\uff1f",
click:function(){g(b,f)}})},complete:function(d,c){"timeout"==c&&(r++,3<r?(a(".loading").css("display","none"),window.location.hash=q,a.createConfirmBox({title:"\u7f51\u7edc\u4e2d\u65ad",content:"\u7f51\u7edc\u5df2\u65ad\u5f00,\u662f\u5426\u91cd\u8fde\uff1f",click:function(){g(b,f)}})):(a.altAuto("\u7f51\u7edc\u4e2d\u65ad..."),g(b,f)))}})}function u(a){return a=a.substring(a.indexOf("<body"),a.indexOf("</body>")+7)}function n(b,f){0==p.length&&(p=a("body"),k=p.children("div"));var d=1;f&&(d=f);var c=
a(b);p.append(c);1==d?h.push(c.children(".header").children("h4").html()):h.pop();var e=h[h.length-2];e&&c.children(".header").children(".toBack").append(e);with(c[0].style)transition="-webkit-transform "+l+"s,opacity 0.4s",webkitTransition="-webkit-transform "+l+"s,opacity 0.4s",webkitTransform="translateX("+100*d+"%)",position="fixed",top="0px",overflowY="auto",overflowX="hidden",width=a.pageWidth+"px",height=a.pageHeight+"px",opacity="1",zIndex="2";with(k[0].style)transition="-webkit-transform "+
l+"s,opacity 0.4s",webkitTransition="-webkit-transform "+l+"s,opacity 0.4s",position="fixed",top="0px",overflowY="auto",overflowX="hidden",width=a.pageWidth+"px",height=a.pageHeight+"px",zIndex=opacity="1";var g=window.setTimeout(function(){clearTimeout(g);with(c[0].style)webkitTransform="translateX(0%)";with(k[0].style)webkitTransform="translateX("+-50*d+"%)",opacity="0";var b=window.setTimeout(function(){clearTimeout(b);k.remove();with(c[0].style)webkitTransform="";k=c;q=window.location.hash;a.closeWebSource&&
a.closeWebSource();a.init&&(a(".loading").css("display","none"),a.init())},500)},10)}function v(){var a=location.pathname.split("/");return a[a.length-1]}var q="",r=0,m=navigator.userAgent,w=-1<m.indexOf("Android")||-1<m.indexOf("Adr"),m=!!m.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);a.isAndroid=w;a.isiOS=m;var l="0.4";a.isAndroid&&(l="0.4");var p=a("body"),k=a("body").children("div"),e=[],h=[];a.getHrefArr=function(){return e};a.getHrefTitle=function(){return h};a.addHrefArr=function(a){e.push(a)};a.clearHrefArrToMain=
function(){for(;1<e.length;)e.pop();for(;1<h.length;)h.pop()};a.clearHrefArr=function(){e=[]};a.preLoadPage=function(b){a.getHTML(b,function(a){a||g(b)})};var t=function(b){r=0;a.init=null;var f="";1<e.length&&(f=e[e.length-2]);f==b?a.getHTML(b,function(a){a&&null!=a&&"null"!=a&&"undefined"!=a?n(a,-1):g(b,function(b){a=b;n(a,-1)});e.pop()}):(e.push(b),a.getHTML(b,function(a){a&&null!=a&&"null"!=a&&"undefined"!=a?n(a):g(b,function(b){a=b;n(a)})}))};a(function(){window.location.hash="#"+v();a.initOpenPage=
function(){a(window).off("hashchange").on("hashchange",function(){a.timer&&clearInterval(a.timer);var b=window.location.hash,b=b.replace("#","");a(".loading").css("display","block");t(b)})};a.initOpenPage();a.tap("a.toBack",function(){event.preventDefault();a.toBack()});a.pageWidth=a(window).width();a.pageHeight=a(window).height();var b=window.location.hash,b=b.replace("#","");e.push(b);h.push(a(".header>h4").html());a("body>div").css({position:"fixed",top:"0px","overflow-x":"hidden","overflow-y":"auto",
width:a.pageWidth+"px",height:a.pageHeight+"px"});var f=a("body").html();a.getHTML(b,function(d){d&&null!=d&&"null"!=d||a.addHTML(b,f)})});a.hrefTo=t;a.toBack=function(){if(a.toBackFn)return a.toBackFn();history.go(-1)};a.tap(".hrefTo",function(){window.location.hash=a(this).attr("href")})})($);